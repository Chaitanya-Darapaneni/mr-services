serviceMaps:
 serviceName: tl-services
 mappings:
 - version: 1.0
   description: Persists marriageRegistartion details in eg_mr_application  table
   fromTopic: save-tl-tradelicense
   isTransaction: true
   queryMaps:

       - query: INSERT INTO eg_mr_application(id, accountid, tenantid, mrnumber, applicationnumber, applicationdate, marriagedate, issueddate, action, status, createdby, lastmodifiedby, createdtime, lastmodifiedtime, businessservice, workflowcode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: MarriageRegistrations.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.id

          - jsonPath: $.MarriageRegistrations.*.accountId

          - jsonPath: $.MarriageRegistrations.*.tenantId

          - jsonPath: $.MarriageRegistrations.*.mrNumber

          - jsonPath: $.MarriageRegistrations.*.applicationnumber

          - jsonPath: $.MarriageRegistrations.*.applicationdate

          - jsonPath: $.MarriageRegistrations.*.marriagedate

          - jsonPath: $.MarriageRegistrations.*.issueddate

          - jsonPath: $.MarriageRegistrations.*.action

          - jsonPath: $.MarriageRegistrations.*.status

          - jsonPath: $.MarriageRegistrations.*.auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime



       - query: INSERT INTO eg_mr_marriageplace(id, ward, placeofmarriage, locality, additionaldetail, mr_id, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: MarriageRegistrations.*.marriagePlace
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.marriagePlace.id

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.ward

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.placeOfMarriage

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.locality.code

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.additionalDetail
            type: JSON
            dbType: JSONB

          - jsonPath: $.MarriageRegistrations.*.id

          - jsonPath: $.MarriageRegistrations.*.auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime



       - query: INSERT INTO public.eg_mr_couple(id, tenantid, mr_id, isdivyang, isgroom, title, firstname, middlename, lastname, dateofbirth, fathername, mothername, createdby, lastmodifiedby, createdtime , lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
         basePath: MarriageRegistrations.*.coupleDetails.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.tenantId

          - jsonPath: $.MarriageRegistrations.*.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.isDivyang

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.isGroom

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.title
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.firstName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.middleName

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.lastName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.dateOfBirth
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.fatherName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.motherName
          
          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].marriagePlace.id

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedTime






 - version: 1.0
   description: Update marriageRegistration details in eg_mr_application  table
   fromTopic: update-tl-tradelicense
   isTransaction: true
   queryMaps:



       - query: UPDATE public.eg_mr_application SET accountid=?,  mrnumber=? , marriagedate=?, issueddate=?, action=?, status=?, lastmodifiedby=?,  lastmodifiedtime=? WHERE id = ?;
         basePath: MarriageRegistrations.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.accountId

          - jsonPath: $.MarriageRegistrations.*.mrNumber

          - jsonPath: $.MarriageRegistrations.*.marriageDate

          - jsonPath: $.MarriageRegistrations.*.issuedDate

          - jsonPath: $.MarriageRegistrations.*.action

          - jsonPath: $.MarriageRegistrations.*.status

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.id


       - query: UPDATE public.eg_mr_marriageplace SET  ward=?, placeofmarriage=?, locality=?, additionaldetail=?,  lastmodifiedby=?,  lastmodifiedtime=? WHERE WHERE id = ?;
         basePath: MarriageRegistrations.*.marriagePlace
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.marriagePlace.ward

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.placeOfMarriage

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.locality.code


          - jsonPath: $.MarriageRegistrations.*.marriagePlace.additionalDetail
            type: JSON
            dbType: JSONB

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.id

       - query: INSERT INTO public.eg_mr_couple(id, tenantid, mr_id, isdivyang, isgroom, title, firstname, middlename, lastname, dateofbirth, fathername, mothername, createdby, lastmodifiedby, createdtime , lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  ON CONFLICT (id) DO UPDATE SET isdivyang = ?, isgroom = ?, title = ?, firstname = ?, middlename= ?, lastname = ? , dateofbirth = ? , fathername = ?, mothername= ? , lastmodifiedby =? , lastmodifiedtime = ?;
         basePath: MarriageRegistrations.*.coupleDetails.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.tenantId

          - jsonPath: $.MarriageRegistrations.*.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.isDivyang

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.isGroom

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.title
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.firstName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.middleName

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.lastName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.dateOfBirth
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.fatherName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.motherName
          
          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].marriagePlace.id

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedTime
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.isDivyang

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.isGroom

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.title
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.firstName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.middleName

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.lastName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.dateOfBirth
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.fatherName
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.motherName
          
          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedTime

       - query: INSERT INTO INSERT INTO eg_mr_coupleaddress(id, tenantid, mr_couple_id, addressline1, addressline2, addressline3, country, state, district, pincode, locality, createdby,  lastmodifiedby ,createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET addressline1 = ?, addressline2 = ?, addressline3 = ?, country = ?, state= ?, district = ? , pincode = ? , locality = ?,  lastmodifiedby =? , lastmodifiedtime = ?;
         basePath: MarriageRegistrations.*.coupleDetails.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.tenantId
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.addressLine1
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.addressLine2
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.addressLine3
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.country
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.state
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.district
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.pinCode
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.locality 

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.addressLine1
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.addressLine2
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.addressLine3
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.country
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.state
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.district
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.pinCode
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.locality 

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_mr_gaurdiandetails(id, tenantid, mr_couple_id, addressid, isgroomsideguardian, relationship, name, addressline1, addressline2, addressline3, country, state, district, pincode, locality, contact, emailaddress, createdby ,lastmodifiedby , createdtime,  lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  ON CONFLICT (id) DO UPDATE SET isgroomsideguardian= ? , relationship= ? , name =? , addressline1 = ?, addressline2 = ?, addressline3 = ?, country = ?, state= ?, district = ? , pincode = ? , locality = ?, contact =? , emailaddress = ? ,lastmodifiedby =? , lastmodifiedtime = ?;
         basePath: MarriageRegistrations.*.coupleDetails.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.tenantId
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.id

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.coupleAddress.id
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.groomSideGuardian
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.relationship
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.name
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.addressLine1
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.addressLine2
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.addressLine3
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.country
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.state
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.district
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.pinCode
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.locality 
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.contact 
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.emailAddress 

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.groomSideGuardian
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.relationship
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.name
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.addressLine1
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.addressLine2
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.addressLine3
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.country
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.state
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.district
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.pinCode
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.locality 
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.contact 
          
          - jsonPath: $.MarriageRegistrations.*.coupleDetails.*.guardianDetails.emailAddress

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.coupleDetails[*].id)].auditDetails.lastModifiedTime



       - query: INSERT INTO public.eg_mr_witness( id, tenantid, mr_id, title, address, firstname, middlename, lastname, country, state, district, pincode, contact, createdby, createdtime, lastmodifiedby, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET title = ?, address = ?, firstname = ?, middlename = ?, lastname = ?, country = ?, state = ?, district = ?, pincode = ? , contact = ? , lastmodifiedby =?, lastmodifiedtime =?;
         basePath: MarriageRegistrations.*.witness*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.witness*.id

          - jsonPath: $.MarriageRegistrations.*.witness*.tenantId

          - jsonPath: $.MarriageRegistrations.*.id

          - jsonPath: $.MarriageRegistrations.*.witness*.title

          - jsonPath: $.MarriageRegistrations.*.witness*.address

          - jsonPath: $.MarriageRegistrations.*.witness*.firstName

          - jsonPath: $.MarriageRegistrations.*.witness*.middleName

          - jsonPath: $.MarriageRegistrations.*.witness*.lastName
          
          - jsonPath: $.MarriageRegistrations.*.witness*.country

          - jsonPath: $.MarriageRegistrations.*.witness*.state

          - jsonPath: $.MarriageRegistrations.*.witness*.district

          - jsonPath: $.MarriageRegistrations.*.witness*.pinCode

          - jsonPath: $.MarriageRegistrations.*.witness*.contact

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.witness[*].id)].auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.witness[*].id)].auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.witness[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.witness[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.witness*.title

          - jsonPath: $.MarriageRegistrations.*.witness*.address

          - jsonPath: $.MarriageRegistrations.*.witness*.firstName

          - jsonPath: $.MarriageRegistrations.*.witness*.middleName

          - jsonPath: $.MarriageRegistrations.*.witness*.lastName
          
          - jsonPath: $.MarriageRegistrations.*.witness*.country

          - jsonPath: $.MarriageRegistrations.*.witness*.state

          - jsonPath: $.MarriageRegistrations.*.witness*.district

          - jsonPath: $.MarriageRegistrations.*.witness*.pinCode

          - jsonPath: $.MarriageRegistrations.*.witness*.contact

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.witness[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.witness[*].id)].auditDetails.lastModifiedTime


       - query: INSERT INTO eg_tl_document_owner(id,tenantId,active,userid, marriagePlaceId, documenttype, fileStoreId,documentuid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT ON CONSTRAINT pk_eg_tl_document_owner DO UPDATE SET active = ?, documenttype = ?, fileStoreId = ?,documentuid = ?, lastmodifiedby = ?,  lastmodifiedtime = ? ON CONFLICT (id) DO UPDATE SET isgroomsideguardian= ? , relationship= ? , name =? , addressline1 = ?, addressline2 = ?, addressline3 = ?, country = ?, state= ?, district = ? , pincode = ? , locality = ?, contact =? , emailaddress = ? ,lastmodifiedby =? , lastmodifiedtime = ?;
         basePath: MarriageRegistrations.*.marriagePlace.owners.*.documents.*
         jsonMaps:
           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.id

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].tenantId

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.active

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners[*][?({id} in @.documents[*].id)].uuid

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].marriagePlace.id

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.documentType

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.fileStoreId

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.documentUid

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].auditDetails.createdBy

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].auditDetails.lastModifiedBy

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].auditDetails.createdTime

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].auditDetails.lastModifiedTime

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.active

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.documentType

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.fileStoreId

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.owners.*.documents.*.documentUid

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].auditDetails.lastModifiedBy

           - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.owners.*.documents[*].id)].auditDetails.lastModifiedTime



       - query: INSERT INTO eg_tl_applicationdocument( id, tenantid, active, documenttype, tradecategorydetail, filestoreid, marriagePlaceid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET active = ?, documenttype =?, tradecategorydetail =?, filestoreid =?,lastmodifiedby =?, lastmodifiedtime =?;
         basePath: MarriageRegistrations.*.marriagePlace.applicationDocuments.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.id

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.tenantId

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.active

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.documentType

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.tradecategorydetail

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.fileStoreId

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.applicationDocuments[*].id)].marriagePlace.id

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.applicationDocuments[*].id)].auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.applicationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.applicationDocuments[*].id)].auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.applicationDocuments[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.active

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.documentType

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.tradecategorydetail

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.applicationDocuments.*.fileStoreId

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.applicationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.applicationDocuments[*].id)].auditDetails.lastModifiedTime



       - query: UPDATE eg_tl_address SET doorno =?,street = ?,buildingName = ?, latitude =?, longitude =?, addressid =?, addressnumber =?,locality =?, type =?, addressline1 =?, addressline2 =?, landmark =?, city =?, pincode =?, detail =?,lastmodifiedby =?, lastmodifiedtime =? WHERE id =?;
         basePath: MarriageRegistrations.*.marriagePlace.address
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.doorNo

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.street

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.buildingName

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.latitude

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.longitude

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.addressId

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.addressNumber

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.locality.code

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.type

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.addressline1

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.addressline2

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.landmark

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.city

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.pinCode

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.detail

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.address.id


       - query: INSERT INTO eg_tl_institution(tenantId,active,id, marriagePlaceid, name, type,designation, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET active = ?,name = ?,type = ?,designation = ?, lastmodifiedby = ?,lastmodifiedtime = ?;
         basePath: MarriageRegistrations.*.marriagePlace.institution
         jsonMaps:
           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.tenantId

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.active

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.id

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.id

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.name

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.type

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.designation

           - jsonPath: $.MarriageRegistrations.*.auditDetails.createdBy

           - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

           - jsonPath: $.MarriageRegistrations.*.auditDetails.createdTime

           - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.active

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.name

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.type

           - jsonPath: $.MarriageRegistrations.*.marriagePlace.institution.designation

           - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

           - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime





 - version: 1.0
   description: Persists tradeLicense details in EG_TL_TradeLicense  table
   fromTopic: update-tl-workflow
   isTransaction: true
   queryMaps:

       - query: INSERT INTO eg_tl_tradelicense_audit SELECT * FROM eg_tl_tradelicense WHERE id = ?;
         basePath: MarriageRegistrations.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.id



       - query: INSERT INTO eg_tl_marriagePlace_audit SELECT * FROM eg_tl_marriagePlace WHERE id = ?;
         basePath: MarriageRegistrations.*.marriagePlace
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.marriagePlace.id



       - query: INSERT INTO eg_tl_verificationdocument( id, tenantid, active, documenttype, tradecategorydetail, filestoreid,marriagePlaceid, createdby, lastmodifiedby, createdtime, lastmodifiedtime) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET active = ?,documenttype =?, tradecategorydetail =?, filestoreid =?, lastmodifiedby =?, lastmodifiedtime =?;
         basePath: MarriageRegistrations.*.marriagePlace.verificationDocuments.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.id

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.tenantId

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.active

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.documentType

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.tradecategorydetail

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.fileStoreId

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.verificationDocuments[*].id)].marriagePlace.id

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.verificationDocuments[*].id)].auditDetails.createdBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.verificationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.verificationDocuments[*].id)].auditDetails.createdTime

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.verificationDocuments[*].id)].auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.active

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.documentType

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.tradecategorydetail

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.verificationDocuments.*.fileStoreId

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.verificationDocuments[*].id)].auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations[*][?({id} in @.marriagePlace.verificationDocuments[*].id)].auditDetails.lastModifiedTime


       - query: UPDATE eg_tl_tradelicense SET validfrom = ?,licenseNumber =?, issueddate = ?, action = ?, status = ?,  lastmodifiedby = ?,  lastmodifiedtime = ? WHERE id=?;
         basePath: MarriageRegistrations.*
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.validFrom

          - jsonPath: $.MarriageRegistrations.*.licenseNumber

          - jsonPath: $.MarriageRegistrations.*.issuedDate

          - jsonPath: $.MarriageRegistrations.*.action

          - jsonPath: $.MarriageRegistrations.*.status

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.id


       - query: UPDATE eg_tl_marriagePlace SET additionaldetail = ?,lastmodifiedby = ?,  lastmodifiedtime = ? WHERE id = ?;
         basePath: MarriageRegistrations.*.marriagePlace
         jsonMaps:
          - jsonPath: $.MarriageRegistrations.*.marriagePlace.additionalDetail
            type: JSON
            dbType: JSONB

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedBy

          - jsonPath: $.MarriageRegistrations.*.auditDetails.lastModifiedTime

          - jsonPath: $.MarriageRegistrations.*.marriagePlace.id

